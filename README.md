# Realtime File Transfer

一个基于Web的实时文件传输系统，支持多人同时在线传输各种类型的文件。

## ✨ 功能特性

- **🚀 实时传输**：所有连接的用户可以实时看到文件上传状态
- **📁 多格式支持**：支持图片、视频、文档、压缩包等各种文件类型
- **📱 跨平台**：在任何设备和浏览器上都能使用
- **🔗 简单分享**：生成唯一链接，一键分享给其他人
- **⚡ 高性能**：优化的文件传输和进度显示
- **🔄 自动同步**：文件列表实时同步，无需手动刷新
- **📋 粘贴板支持**：支持粘贴文件、图片、文本等多种内容（新增！）
- **👁️ 文件预览**：支持图片、视频、文本的直接预览（新增！）

## 🛠️ 技术栈

- **后端**：Node.js + Express + Socket.IO
- **前端**：原生HTML/CSS/JavaScript
- **实时通信**：WebSocket
- **文件上传**：Multer

## 📋 粘贴板功能

### 快速开始

**粘贴文件**：
1. 在文件管理器中选中文件，按 `Ctrl+C` (Windows/Linux) 或 `Cmd+C` (Mac)
2. 在房间页面按 `Ctrl+V` (或 `Cmd+V`)
3. 文件自动开始上传

**粘贴图片**：
1. 使用截图工具截图（如微信 Alt+A，QQ Ctrl+Alt+A）
2. 在房间页面按 `Ctrl+V`
3. 图片自动作为文件上传

**粘贴文本**：
1. 选中文本，按 `Ctrl+C` 复制
2. 在房间页面按 `Ctrl+V`
3. 文本自动保存为 `.txt` 文件并上传

### 支持的粘贴内容

- ✅ **文件**：任何类型的文件（图片、视频、文档、压缩包等）
- ✅ **图片**：截图、复制的图片内容
- ✅ **文本**：纯文本、代码片段、配置信息
- ✅ **混合内容**：同时粘贴多种类型的内容

### 文件来源标识

每个文件会显示其来源：
- 📁 **Local**：通过文件选择器上传
- 📋 **Clipboard**：通过粘贴板粘贴
- ✋ **Drag**：通过拖拽上传

## 🚀 快速开始

### 1. 安装依赖

```bash
npm install
```

### 2. 启动服务器

```bash
# 生产模式
npm start

# 开发模式（需要安装 nodemon）
npm run dev
```

### 3. 访问应用

打开浏览器访问：http://localhost:3000

## 📖 使用说明

### 创建传输房间

1. 访问主页 http://localhost:3000
2. 点击"🔗 Create New Room"按钮
3. 系统会生成一个唯一的房间链接和房间码
4. 将链接分享给其他用户

### 传输文件

1. 所有用户访问同一个房间链接
2. 拖拽文件到上传区域或点击"Browse Files"选择文件
3. **📋 新增：支持粘贴功能！**
   - 从文件管理器复制文件后，按 `Ctrl+V` (Windows/Linux) 或 `Cmd+V` (Mac) 粘贴
   - 截图后（如微信截图 Alt+A），直接按 `Ctrl+V` 粘贴到页面
   - 复制文本内容，按 `Ctrl+V` 粘贴，自动保存为文本文件
4. 文件开始上传，所有用户可以看到实时进度
5. 上传完成后，所有用户都可以下载文件

### 支持的操作

- **上传文件**：拖拽或点击选择文件
- **📋 粘贴文件**：复制文件后按 Ctrl+V (Cmd+V) 粘贴
- **🖼️ 预览图片**：上传后直接显示缩略图，点击预览按钮查看大图
- **🎥 预览视频**：内嵌播放器，支持控制播放
- **📝 预览文本**：显示前10行内容，支持复制和查看完整内容
- **查看进度**：实时显示上传进度百分比
- **下载文件**：点击下载按钮下载已完成的文件
- **取消上传**：在上传完成前可以取消

## 📁 项目结构

```
.
├── server.js          # 服务器端主文件
├── package.json       # 项目配置和依赖
├── .env              # 环境变量配置
├── tsconfig.json     # TypeScript配置
├── public/           # 前端静态文件
│   ├── index.html    # 主页（创建房间）
│   ├── room.html     # 房间页（文件传输）
│   ├── css/
│   │   └── style.css # 样式文件
│   └── js/
│       ├── index.js  # 主页逻辑
│       └── room.js   # 房间页逻辑
├── uploads/          # 文件上传目录
└── README.md         # 项目说明
```

## ⚙️ 配置说明

在 `.env` 文件中配置以下参数：

```env
PORT=3000                    # 服务器端口
UPLOAD_DIR=./uploads         # 文件上传目录
MAX_FILE_SIZE=50000000       # 最大文件大小（字节）
CORS_ORIGIN=http://localhost:3000  # CORS允许的源
```

## 🔧 开发

### 环境要求

- Node.js v14+
- npm 或 yarn

### 开发命令

```bash
# 安装依赖
npm install

# 启动开发服务器（自动重启）
npm run dev

# 生产环境启动
npm start
```

## 🚫 已知限制

- 文件存储在服务器本地，重启服务器后文件不会丢失
- 暂不支持断点续传
- 大文件传输可能需要较长时间

## 🔮 未来计划

- [ ] 支持文件预览（图片、PDF等）
- [ ] 添加文件夹上传功能
- [ ] 支持断点续传
- [ ] 实现文件加密传输
- [ ] 添加用户认证
- [ ] 支持云存储（AWS S3等）

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📄 许可证

MIT License

## 🙏 致谢

感谢使用这个项目！如果觉得有用，请给个 ⭐️ 支持！
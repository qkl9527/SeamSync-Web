<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=1.0, user-scalable=no">
    <title>Mobile Paste Optimization Test</title>
    <link rel="stylesheet" href="/css/apple-style.css">
    <style>
        /* é¢å¤–çš„ç§»åŠ¨ç«¯æµ‹è¯•æ ·å¼ */
        @media (max-width: 768px) {
            body {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            }

            .test-container {
                max-width: 100%;
                margin: 20px auto;
                padding: 20px;
            }

            .test-section {
                background: rgba(255, 255, 255, 0.98);
                border-radius: 16px;
                padding: 20px;
                margin-bottom: 20px;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
                border: 2px solid rgba(255, 255, 255, 0.3);
            }

            .test-section h3 {
                margin: 0 0 15px 0;
                color: #1d1d1f;
                font-size: 18px;
                font-weight: 800;
                text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);
            }

            .test-buttons {
                display: flex;
                gap: 10px;
                flex-wrap: wrap;
                margin-bottom: 15px;
            }

            .test-btn {
                flex: 1;
                min-width: 140px;
                padding: 14px 18px;
                border: none;
                border-radius: 14px;
                font-size: 15px;
                font-weight: 800;
                cursor: pointer;
                transition: all 0.2s ease;
                box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
                text-transform: uppercase;
                letter-spacing: 0.8px;
                border: 3px solid rgba(255, 255, 255, 0.5);
            }

            .test-btn.primary {
                background: linear-gradient(180deg, #007AFF, #0056CC);
                color: white;
                border: 3px solid rgba(255, 255, 255, 0.5);
            }

            .test-btn.success {
                background: linear-gradient(180deg, #34C759, #2CA047);
                color: white;
                border: 3px solid rgba(255, 255, 255, 0.5);
            }

            .test-btn.error {
                background: linear-gradient(180deg, #FF3B30, #CC0000);
                color: white;
                border: 3px solid rgba(255, 255, 255, 0.5);
            }

            .test-btn.warning {
                background: linear-gradient(180deg, #FF9500, #CC7000);
                color: white;
                border: 3px solid rgba(255, 255, 255, 0.5);
            }

            .test-btn:hover {
                transform: translateY(-3px);
                box-shadow: 0 10px 24px rgba(0, 113, 227, 0.4);
            }

            .test-content {
                background: rgba(245, 245, 247, 0.95);
                border-radius: 14px;
                padding: 16px;
                border: 2px solid rgba(60, 60, 67, 0.25);
            }

            .test-content p {
                margin: 0 0 10px 0;
                line-height: 1.7;
                color: #333;
                font-size: 15px;
                font-weight: 600;
            }

            .test-content p:last-child {
                margin-bottom: 0;
            }

            /* ç¡®ä¿é€šçŸ¥å®¹å™¨å¯è§ */
            .notifications {
                position: static !important;
                margin-bottom: 20px;
            }

            .mobile-notifications {
                position: fixed !important;
                bottom: 20px !important;
                right: 20px !important;
                left: 20px !important;
                z-index: 9999 !important;
            }

            .mobile-notifications .notification {
                max-width: calc(100vw - 40px) !important;
                margin: 0 auto !important;
                border-width: 2px !important;
                font-weight: 700 !important;
            }
        }

        /* PCç«¯ä¿æŒåŸæ · */
        @media (min-width: 769px) {
            .test-container {
                max-width: 800px;
                margin: 40px auto;
                padding: 40px;
                background: white;
                border-radius: 20px;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
            }

            .test-section {
                margin-bottom: 30px;
                padding: 30px;
            }

            .test-section h3 {
                font-size: 20px;
            }
        }

        /* æš—è‰²æ¨¡å¼æµ‹è¯•æ ·å¼ */
        @media (prefers-color-scheme: dark) {
            .test-section {
                background: rgba(28, 28, 30, 0.98);
                border: 2px solid rgba(235, 235, 245, 0.15);
            }

            .test-section h3 {
                color: #ffffff;
                text-shadow: 0 1px 0 rgba(0, 0, 0, 0.3);
            }

            .test-content {
                background: rgba(44, 44, 46, 0.95);
                border: 2px solid rgba(80, 80, 84, 0.3);
            }

            .test-content p {
                color: #e5e5e7;
            }

            body {
                background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
            }
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 style="text-align: center; margin-bottom: 30px; color: white; text-shadow: 0 2px 4px rgba(0,0,0,0.3);">
            ğŸ“± ç§»åŠ¨ç«¯æç¤ºäº¤äº’ä¼˜åŒ–æµ‹è¯•
        </h1>

        <!-- é€šçŸ¥åŒºåŸŸ -->
        <div id="notifications" class="notifications"></div>

        <!-- æµ‹è¯•å†…å®¹åŒºåŸŸ -->
        <div class="test-section">
            <h3>ğŸ“‹ æµ‹è¯•å†…å®¹åŒºåŸŸ</h3>
            <div class="test-content">
                <p>è¿™ä¸ªåŒºåŸŸæ¨¡æ‹Ÿä¸»è¦çš„é¡µé¢å†…å®¹ã€‚åœ¨ç§»åŠ¨ç«¯ï¼Œæç¤ºä¸åº”è¯¥é®æŒ¡è¿™äº›å†…å®¹ã€‚</p>
                <p>æ–‡ä»¶åˆ—è¡¨...</p>
                <p>ä¸Šä¼ æŒ‰é’®...</p>
                <p>å…¶ä»–é‡è¦ä¿¡æ¯...</p>
            </div>
        </div>

        <!-- æµ‹è¯•æŒ‰é’® -->
        <div class="test-section">
            <h3>ğŸ¯ æµ‹è¯•ä¸åŒç±»å‹çš„æç¤º</h3>
            <div class="test-buttons">
                <button class="test-btn success" onclick="testNotification('success')">
                    âœ… æˆåŠŸæç¤º
                </button>
                <button class="test-btn error" onclick="testNotification('error')">
                    âŒ é”™è¯¯æç¤º
                </button>
                <button class="test-btn warning" onclick="testNotification('warning')">
                    âš ï¸ è­¦å‘Šæç¤º
                </button>
                <button class="test-btn primary" onclick="testNotification('info')">
                    â„¹ï¸ ä¿¡æ¯æç¤º
                </button>
            </div>

            <div class="test-buttons">
                <button class="test-btn success" onclick="testMobilePaste()">
                    ğŸ“‹ æµ‹è¯•ç²˜è´´æç¤º
                </button>
                <button class="test-btn primary" onclick="testMultipleNotifications()">
                    ğŸš€ å¤šä¸ªæç¤º
                </button>
                <button class="test-btn warning" onclick="clearAllNotifications()">
                    ğŸ—‘ï¸ æ¸…é™¤æ‰€æœ‰
                </button>
            </div>
        </div>

        <!-- è¯´æ˜ -->
        <div class="test-section">
            <h3>ğŸ“– ä¼˜åŒ–è¯´æ˜</h3>
            <div class="test-content">
                <p><strong>ç§»åŠ¨ç«¯ä¼˜åŒ–ï¼š</strong></p>
                <p>â€¢ æç¤ºä¸ä¼šé®æŒ¡ä¸»è¦å†…å®¹</p>
                <p>â€¢ åº•éƒ¨æµ®åŠ¨æç¤ºï¼Œ4ç§’åè‡ªåŠ¨æ¶ˆå¤±</p>
                <p>â€¢ ç²˜è´´æç¤ºéä¾µå…¥å¼ï¼Œ5ç§’è‡ªåŠ¨æ¶ˆå¤±</p>
                <p>â€¢ å¢å¼ºå¯¹æ¯”åº¦ï¼Œç™½å¤©é»‘å¤œéƒ½æ¸…æ™°å¯è§</p>
                <p><strong>PCç«¯ä¿æŒï¼š</strong></p>
                <p>â€¢ å³ä¸Šè§’å›ºå®šæ˜¾ç¤ºï¼Œä¸å½±å“å†…å®¹</p>
                <p>â€¢ 3ç§’åè‡ªåŠ¨æ¶ˆå¤±</p>
            </div>
        </div>
    </div>

    <script>
        // ç§»åŠ¨ç«¯æ£€æµ‹
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

        // Toast é€šçŸ¥å‡½æ•°ï¼ˆä¸room.jsä¿æŒä¸€è‡´ï¼‰
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `notification ${type}`;

            // ç§»åŠ¨ç«¯ä½¿ç”¨æ›´é•¿çš„æ˜¾ç¤ºæ—¶é—´
            const displayTime = isMobile ? 4000 : 3000;

            // æ·»åŠ æ¶ˆæ¯å†…å®¹
            toast.textContent = message;

            // æ ¹æ®è®¾å¤‡ç±»å‹é€‰æ‹©ä¸åŒçš„å®¹å™¨
            let container;
            if (isMobile) {
                // ç§»åŠ¨ç«¯ä½¿ç”¨åº•éƒ¨å›ºå®šé€šçŸ¥
                container = document.querySelector('.mobile-notifications');
                if (!container) {
                    container = document.createElement('div');
                    container.className = 'mobile-notifications';
                    document.body.appendChild(container);
                }
            } else {
                // æ¡Œé¢ç«¯ä½¿ç”¨å³ä¸Šè§’é€šçŸ¥
                container = document.getElementById('notifications');
            }

            // æ·»åŠ åˆ°å®¹å™¨
            if (container) {
                container.appendChild(toast);
            } else {
                document.body.appendChild(toast);
            }

            // æ·»åŠ æ˜¾ç¤ºåŠ¨ç”»
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = isMobile ? 'translateY(100%)' : 'translateX(100%)';
                setTimeout(() => {
                    toast.remove();
                    // å¦‚æœæ˜¯ç§»åŠ¨ç«¯ä¸”å®¹å™¨ä¸ºç©ºï¼Œç§»é™¤å®¹å™¨
                    if (isMobile && container && container.parentElement && container.children.length === 0) {
                        container.remove();
                    }
                }, 300);
            }, displayTime);
        }

        // æµ‹è¯•é€šçŸ¥
        function testNotification(type) {
            const messages = {
                success: 'âœ… æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼',
                error: 'âŒ ä¸Šä¼ å¤±è´¥ï¼Œè¯·é‡è¯•',
                warning: 'âš ï¸ ç½‘ç»œè¿æ¥ä¸ç¨³å®š',
                info: 'â„¹ï¸ æ£€æµ‹åˆ°æ–°ç‰ˆæœ¬å¯ç”¨'
            };

            showToast(messages[type], type);
        }

        // æµ‹è¯•ç²˜è´´æç¤º
        function testMobilePaste() {
            const notification = document.createElement('div');
            notification.className = 'mobile-paste-notice';
            const sampleText = 'è¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡æœ¬ï¼Œç”¨äºæ¨¡æ‹Ÿä»å‰ªè´´æ¿ç²˜è´´çš„å†…å®¹ã€‚åœ¨ç§»åŠ¨ç«¯ï¼Œè¿™ç§æç¤ºä¸åº”è¯¥é®æŒ¡é¡µé¢çš„ä¸»è¦å†…å®¹...';
            notification.innerHTML = `
                <div class="mobile-paste-content">
                    <div class="mobile-paste-icon">ğŸ“‹</div>
                    <div class="mobile-paste-text">
                        <div class="mobile-paste-title">ğŸ“‹ Paste Available</div>
                        <div class="mobile-paste-preview">${escapeHtml(sampleText.substring(0, 50))}...</div>
                    </div>
                    <div class="mobile-paste-actions">
                        <button class="btn-paste-yes">âœ… Paste</button>
                        <button class="btn-paste-no">âŒ No</button>
                    </div>
                </div>
            `;

            document.body.appendChild(notification);

            // Animate in
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);

            // Add event listeners
            const yesBtn = notification.querySelector('.btn-paste-yes');
            const noBtn = notification.querySelector('.btn-paste-no');

            yesBtn.addEventListener('click', () => {
                showToast('âœ… æ–‡æœ¬å·²ç²˜è´´', 'success');
                notification.classList.remove('show');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            });

            noBtn.addEventListener('click', () => {
                notification.classList.remove('show');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            });

            // Auto-hide after 5 seconds
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.classList.remove('show');
                    setTimeout(() => {
                        document.body.removeChild(notification);
                    }, 300);
                }
            }, 5000);
        }

        // æµ‹è¯•å¤šä¸ªé€šçŸ¥
        function testMultipleNotifications() {
            const messages = [
                { text: 'âœ… ç¬¬ä¸€ä¸ªé€šçŸ¥', type: 'success' },
                { text: 'âš ï¸ ç¬¬äºŒä¸ªé€šçŸ¥', type: 'warning' },
                { text: 'â„¹ï¸ ç¬¬ä¸‰ä¸ªé€šçŸ¥', type: 'info' }
            ];

            messages.forEach((msg, index) => {
                setTimeout(() => {
                    showToast(msg.text, msg.type);
                }, index * 500);
            });
        }

        // æ¸…é™¤æ‰€æœ‰é€šçŸ¥
        function clearAllNotifications() {
            // æ¸…é™¤æ™®é€šçš„é€šçŸ¥
            const notifications = document.querySelectorAll('.notification');
            notifications.forEach(notification => {
                notification.style.opacity = '0';
                notification.style.transform = isMobile ? 'translateY(100%)' : 'translateX(100%)';
                setTimeout(() => {
                    notification.remove();
                }, 300);
            });

            // æ¸…é™¤ç²˜è´´é€šçŸ¥
            const pasteNotices = document.querySelectorAll('.mobile-paste-notice');
            pasteNotices.forEach(notice => {
                notice.classList.remove('show');
                setTimeout(() => {
                    notice.remove();
                }, 300);
            });

            // æ¸…é™¤å®¹å™¨
            const mobileContainer = document.querySelector('.mobile-notifications');
            if (mobileContainer) {
                mobileContainer.remove();
            }

            showToast('ğŸ—‘ï¸ æ‰€æœ‰é€šçŸ¥å·²æ¸…é™¤', 'info');
        }

        // HTMLè½¬ä¹‰å‡½æ•°
        function escapeHtml(text) {
            return text
                .replace(/&/g, '&')
                .replace(/</g, '<')
                .replace(/>/g, '>')
                .replace(/"/g, '"')
                .replace(/'/g, "'");
        }

        // é¡µé¢åŠ è½½æç¤º
        window.addEventListener('load', () => {
            setTimeout(() => {
                showToast(isMobile ? 'ğŸ“± æ‚¨æ­£åœ¨ä½¿ç”¨ç§»åŠ¨è®¾å¤‡' : 'ğŸ’» æ‚¨æ­£åœ¨ä½¿ç”¨æ¡Œé¢è®¾å¤‡', isMobile ? 'info' : 'success');
            }, 500);
        });
    </script>
</body>
</html>